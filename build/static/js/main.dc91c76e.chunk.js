(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,a,t){},22:function(e,a,t){e.exports=t(35)},33:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(19),l=t.n(r),c=t(4),s=t(5),i=t(7),u=t(6),m=t(8),d=t(16),h="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:k},v=function(e){return fetch("".concat(h,"/books/").concat(e),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.book})},f=function(){return fetch("".concat(h,"/books"),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.books})},p=function(e,a){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:a})}).then(function(e){return e.json()})},E=function(e){return fetch("".concat(h,"/search"),{method:"POST",headers:Object(d.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},g=(t(11),t(13)),y=(t(12),t(3)),N=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(o)))).state={shelfType:{}},t.handleSearch=function(e){console.log(e.target.value),t.props.onSearchBook&&t.props.onSearchBook(e.target.value)},t.handleChange=function(e){e.persist(),v(e.target.name).then(function(a){console.log(e.target.value),t.props.onUpdateBook&&t.props.onUpdateBook(a,e.target.value)})},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this,a=this.state.shelfType,t=this.props,n=t.books;return t.allBooks.map(function(e){return a[e.id]=e.shelf}),o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(y.b,{to:"/",className:"close-search"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{onChange:this.handleSearch,type:"text",name:"name",placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},n.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks.smallThumbnail,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("form",{onSubmit:e.handleCategory},o.a.createElement("select",{name:t.id,onChange:e.handleChange,defaultValue:a[t.id]?a[t.id]:"none"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None"))))),o.a.createElement("div",{className:"book-title"},t.title),void 0!==t.authors&&o.a.createElement("div",{className:"book-authors"},t.authors.toString())))}))))}}]),a}(n.Component),R=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(o)))).handleChange=function(e){e.persist(),console.log(e.target.value),console.log(e.target.name),v(e.target.name).then(function(a){console.log(e.target.value),t.props.onUpdateBook&&t.props.onUpdateBook(a,e.target.value)})},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this,a=this.props,t=(a.allBooks,a.wantToRead),n=a.read,r=a.currentlyReading;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},r.map(function(a){return o.a.createElement("li",{key:a.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(a.imageLinks.smallThumbnail,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("form",{onSubmit:e.handleCategory},o.a.createElement("select",{name:a.id,onChange:e.handleChange,defaultValue:"currentlyReading"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None"))))),o.a.createElement("div",{className:"book-title"},a.title),void 0!==a.authors&&o.a.createElement("div",{className:"book-authors"},a.authors.toString())))})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.map(function(a){return o.a.createElement("li",{key:a.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(a.imageLinks.smallThumbnail,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("form",{onSubmit:e.handleCategory},o.a.createElement("select",{name:a.id,onChange:e.handleChange,defaultValue:"wantToRead"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None"))))),o.a.createElement("div",{className:"book-title"},a.title),void 0!==a.authors&&o.a.createElement("div",{className:"book-authors"},a.authors.toString())))})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},n.map(function(a){return o.a.createElement("li",{key:a.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(a.imageLinks.smallThumbnail,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("form",{onSubmit:e.handleCategory},o.a.createElement("select",{name:a.id,onChange:e.handleChange,defaultValue:"read"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None"))))),o.a.createElement("div",{className:"book-title"},a.title),void 0!==a.authors&&o.a.createElement("div",{className:"book-authors"},a.authors.toString())))})))))),o.a.createElement(y.b,{className:"open-search",to:"/search"},"Add a book"))}}]),a}(n.Component),w=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(o)))).state={showSearchPage:!1,books:[],currentlyReading:[],wantToRead:[],read:[],allBooks:[]},t.SearchBooks=function(e){E(e).then(function(e){t.setState({books:e})})},t.updateBooks=function(e,a){p(e,a).then(function(e){f().then(function(e){var a=e.filter(function(e){return"currentlyReading"===e.shelf}),n=e.filter(function(e){return"wantToRead"===e.shelf}),o=e.filter(function(e){return"read"===e.shelf});t.setState({allBooks:e,currentlyReading:a,wantToRead:n,read:o})})})},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;f().then(function(a){console.log(a);var t=a.filter(function(e){return"currentlyReading"===e.shelf}),n=a.filter(function(e){return"wantToRead"===e.shelf}),o=a.filter(function(e){return"read"===e.shelf});e.setState({allBooks:a,currentlyReading:t,wantToRead:n,read:o})})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(g.a,{path:"/search",render:function(a){var t=a.history;return o.a.createElement(N,{books:e.state.books,allBooks:e.state.allBooks,onSearchBook:function(a){e.SearchBooks(a)},onUpdateBook:function(a,n){e.updateBooks(a,n),t.push("/")}})}}),o.a.createElement(g.a,{exact:!0,path:"/",render:function(){return o.a.createElement(R,{allBooks:e.state.allBooks,currentlyReading:e.state.currentlyReading,wantToRead:e.state.wantToRead,read:e.state.read,onUpdateBook:function(a,t){e.updateBooks(a,t)}})}}))}}]),a}(o.a.Component);t(33);l.a.render(o.a.createElement(y.a,null,o.a.createElement(w,null)),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.dc91c76e.chunk.js.map